{% extends 'base.njk' %}

{%- block extrahead %}
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
{%- endblock %}

{%- block contents %}
<article>
    <h2>{{ title }}</h2>

    <aside class="references">
        {%- set defines = id | itemDefines -%}
        {%- set itemRefs = id | itemItemRefs -%}
        {%- set conceptRefs = id | itemConceptRefs -%}
        {% if defines %}
        <div>
            <p>Defines:</p>
            <ul>
            {%- for c in defines %}
            <li><a href="{{ c.permalink|url }}">{{ c.title }}</a></li>
            {%- endfor %}
            </ul>
        </div>
        {% endif %}
        {% if itemRefs %}
        <div>
            <p>Item references:</p>
            <ul>
            {%- for c in itemRefs %}
            <li><a href="{{ c.permalink|url }}">{{ c.id }}</a></li>
            {%- endfor %}
            </ul>
        </div>
        {% endif %}
        {% if conceptRefs %}
        <div>
            <p>Concept references:</p>
            <ul>
            {%- for c in conceptRefs %}
            <li><a href="{{ c.permalink|url }}">{{ c.title }}</a></li>
            {%- endfor %}
            </ul>
        </div>
        {% endif %}
        {% if refs.validations %}
        <div>
            <p>Validations:</p>
            <ul>
            {%- for c in refs.validations %}
            <li>{{ c.source|sourceShort|safe }}, {{ c.location }}</li>
            {%- endfor %}
            </ul>
        </div>
        {% endif %}
    </aside>

    <div class="item">
    {{ contents | safe }}
    </div>
{%- endblock %}