{% extends "base.html" %}
{% load item_tags %}

{% block title %}Home{% endblock %}

{% block mainbar %}

<h2>teoremer blog</h2>

{% for item in blog_feed %}
<h4><a href="{{ item.link }}">{{ item.title }}</a></h4>
<p>{{ item.description|safe }}</p>
{% endfor %}

<h2>Latest items</h2>

<div id="top-item-list"><i>loading...</i></div>

{% endblock %}

{% block sidebar %}
<h4>Tags</h4>
<ul class="tag-counts">
{% for tc in top_tags %}
  <li><span class="tag">{{ tc.name|typeset_tag }}</span> &times; {{ tc.count }}</li>
{% endfor %}
</ul>
{% endblock %}

{% block bodybottom %}

{% include 'include/js-scripts.html' only %}

<script type="text/javascript">
var topList = new teoremer.TopListView({
    el: $('#top-item-list'),
});
topList.collection.reset({{ init_items|safe }}, { parse: true });
</script>

{% endblock %}
